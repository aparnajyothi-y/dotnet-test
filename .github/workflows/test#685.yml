name: Validate corrupted SDK

on:
  workflow_dispatch:

jobs:
  validate:
    runs-on: [self-hosted, windows]

    steps:
      - name: Inspect SDK directory
        shell: powershell
        run: |
          $sdk = "C:\Program Files\dotnet\sdk\8.0.416"
          if (Test-Path $sdk) {
            Write-Host "SDK directory exists"
            Get-ChildItem $sdk -Recurse | Measure-Object
          } else {
            Write-Host "SDK directory missing"
          }

      - name: dotnet restore (expected to fail)
        shell: powershell
        run: |
          dotnet restore
